<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Katya's JobFinder</title>
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    <link rel="stylesheet" href="/static/style.css?v=4">
</head>
<body>
    <header>
        <div class="header-content">
            <h1><img src="/static/favicon.svg" alt="" class="header-icon"><span data-i18n="site-title">Katya's JobFinder</span></h1>
            <nav class="header-nav">
                <a href="/" class="nav-link active" data-i18n="nav-jobs">Jobs</a>
                <a href="/applications" class="nav-link" data-i18n="nav-applications">My Applications</a>
                <a href="/feedback" class="nav-link" data-i18n="nav-feedback">Feedback</a>
            </nav>
        </div>
        <div class="header-controls">
            <div class="lang-switcher">
                <button class="lang-btn" data-lang="en">EN</button>
                <button class="lang-btn" data-lang="ru">RU</button>
                <button class="lang-btn" data-lang="ua">UA</button>
            </div>
            <button class="theme-toggle" id="theme-toggle" title="Toggle dark mode">&#127769;</button>
            <button class="ukraine-toggle" id="ukraine-toggle" title="Ukraine mode" style="display:none">&#127482;&#127462;</button>
        </div>
        <div class="header-actions">
            <button id="btn-scrape" onclick="startScrape()">
                <span class="btn-icon">&circlearrowleft;</span> <span data-i18n="btn-scrape">Scan for Jobs</span>
            </button>
            <div id="stats-bar">
                <span id="stat-total">0 jobs</span>
                <span id="stat-new" class="badge-new" style="display:none">0 new</span>
            </div>
        </div>
    </header>

    <main>
        <!-- Status bar for scraping -->
        <div id="status-bar" style="display:none">
            <div class="spinner"></div>
            <span id="status-text">Scanning job boards...</span>
        </div>

        <!-- Search bar -->
        <div class="search-bar">
            <input type="text" id="search-input" data-i18n-placeholder="search-placeholder" placeholder="Search jobs by title, company, or keyword..." oninput="debounceSearch()">
        </div>

        <!-- Filter Panels (3 columns: Category, Location, Job Boards) -->
        <div class="filter-panels three-col">
            <div class="filter-panel" id="panel-category">
                <div class="panel-header" onclick="togglePanel(this)">
                    <h3 data-i18n="filter-category">Category</h3>
                    <span class="panel-toggle">&#9660;</span>
                </div>
                <div class="panel-body">
                    <ul class="filter-list" id="list-category"></ul>
                </div>
            </div>

            <div class="filter-panel" id="panel-location">
                <div class="panel-header" onclick="togglePanel(this)">
                    <h3 data-i18n="filter-location">Location</h3>
                    <span class="panel-toggle">&#9660;</span>
                </div>
                <div class="panel-body">
                    <ul class="filter-list" id="list-location"></ul>
                </div>
            </div>

            <div class="filter-panel" id="panel-jobboards">
                <div class="panel-header" onclick="togglePanel(this)">
                    <h3 data-i18n="filter-jobboards">Job Boards</h3>
                    <span class="panel-toggle">&#9660;</span>
                </div>
                <div class="panel-body">
                    <div class="panel-input-row">
                        <input type="text" id="input-add-board" data-i18n-placeholder="add-board-placeholder" placeholder="Add a job board..." class="panel-input">
                        <button class="panel-input-btn" onclick="addCustomBoard()">+</button>
                    </div>
                    <ul class="filter-list" id="list-custom-boards"></ul>
                    <ul class="filter-list" id="list-source"></ul>
                </div>
            </div>
        </div>

        <!-- Custom Keywords -->
        <div class="keywords-section">
            <div class="keywords-input-row">
                <input type="text" id="input-keyword" data-i18n-placeholder="add-keyword-placeholder" placeholder="Add search keyword..." class="keywords-input">
                <button class="keywords-add-btn" onclick="addCustomKeyword()" data-i18n="btn-add-keyword">Add</button>
            </div>
            <div class="keywords-tags" id="keywords-tags"></div>
        </div>

        <!-- Active Filters Bar -->
        <div class="active-filters" id="active-filters" style="display:none">
            <div class="active-filters-chips" id="active-filters-chips"></div>
            <button class="btn-clear-filters" onclick="clearAllFilters()" data-i18n="btn-clear-filters">Clear all</button>
        </div>

        <!-- Controls row -->
        <div class="controls-row">
            <div class="results-count" id="results-count">Showing 0 jobs</div>
            <div class="controls-right">
                <label class="toggle-switch-label">
                    <input type="checkbox" id="toggle-dutch" checked onchange="onDutchToggle()">
                    <span class="toggle-switch-slider"></span>
                    <span data-i18n="toggle-dutch">Hide jobs requiring Dutch</span>
                </label>
                <label class="toggle-new">
                    <input type="checkbox" id="toggle-new" onchange="loadJobs()"> <span data-i18n="toggle-new">Show only new</span>
                </label>
                <div class="sort-control">
                    <label for="sort-select" data-i18n="sort-label">Sort:</label>
                    <select id="sort-select" onchange="loadJobs()">
                        <option value="newest" data-i18n="sort-newest">Newest first</option>
                        <option value="score" data-i18n="sort-score">Best match</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Job Results List -->
        <div id="jobs-container"></div>

        <div id="load-more-container" style="display:none">
            <button id="btn-load-more" onclick="loadMore()" data-i18n="btn-load-more">Load more</button>
        </div>

        <div id="empty-state" style="display:none">
            <div class="empty-icon">&#128203;</div>
            <h2 data-i18n="empty-title">No jobs yet</h2>
            <p data-i18n-html="empty-text">Click <strong>Scan for Jobs</strong> to search all job boards.</p>
        </div>
    </main>

    <!-- Score breakdown popup -->
    <div id="score-popup" class="score-popup" style="display:none">
        <div class="score-popup-header">
            <span data-i18n="score-breakdown-title">Score Breakdown</span>
            <button class="score-popup-close" onclick="closeScorePopup()">&times;</button>
        </div>
        <div class="score-popup-body" id="score-popup-body"></div>
    </div>
    <div id="score-popup-overlay" class="score-popup-overlay" style="display:none" onclick="closeScorePopup()"></div>

    <script src="/static/theme.js?v=4"></script>
    <script src="/static/app.js?v=4"></script>
</body>
</html>
